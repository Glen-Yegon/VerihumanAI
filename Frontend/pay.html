<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VeriHuman - Futuristic Payment</title>
  <link rel="stylesheet" href="styles/pay.css" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600&family=Inter:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <!-- Hamburger -->
    <div class="nav-hamburger" id="hamburger">
      <span></span><span></span><span></span>
    </div>

    <!-- Logo -->
    <div class="nav-logo">
      <img src="images/vERIHUMAN (6).png" alt="VeriHuman Logo" />
    </div>

    <!-- Profile -->
    <div class="nav-profile">
      <a href="profile.html" aria-label="Profile">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
             stroke-width="1.5" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M15.75 7.5a3.75 3.75 0 11-7.5 0 
                   3.75 3.75 0 017.5 0zM4.5 
                   20.25a8.25 8.25 0 1115 0v.75H4.5v-.75z" />
        </svg>
      </a>
    </div>
  </nav>
  <!-- Hero Section -->
<section class="hero-section">
  <h1 class="hero-title">VERIHUMAN</h1>
</section>

<section class="pricing">
  <!-- Free Plan -->
  <div class="card free">
    <h2>Essential</h2>
    <p class="price">FREE</p>
    <ul class="features">
      <li>10 Free Credits</li>
      <li>Access to AI Humanizer</li>
      <li>Basic Humanization Score</li>
      <li>Community Support</li>
    </ul>
    <div class="card-footer">
      <span class="no-button">Included</span>
    </div>
  </div>

  <!-- Premium Plan -->
  <div class="card premium">
    <h2>Neural Access</h2>
    <p class="price">$19<span>/month</span></p>
    <ul class="features">
      <li>Unlimited Credits</li>
      <li>Advanced Humanization AI</li>
      <li>Detailed Humanization Score</li>
      <li>Priority Email Support</li>
      <li>Early Access to New Features</li>
    </ul>
    <div class="card-footer">
      <button class="subscribe-btn">Subscribe</button>
    </div>
  </div>
</section>



  <!-- Hidden Menu -->
<!-- Side Menu -->
<div class="side-menu" id="sideMenu">
  <!-- Close Button -->
  <span class="close-btn" id="closeBtn">&times;</span>

  <!-- Logo -->
  <div class="menu-logo">
    <img src="images/vERIHUMAN (6).png" alt="Logo">
  </div>

  <hr class="divider">

  <!-- Links -->
  <nav class="menu-links">
    <a href="index.html">Home</a>
    <a href="profile.html">Profile</a>
    <a href="sign.html">Sign Up / Login</a>
  </nav>

  <hr class="divider">

  <!-- Bottom Branding -->
  <div class="menu-brand">Verihuman AI</div>
</div>


<!-- Matrix-style AI Background -->
<canvas id="matrixCanvas"></canvas>
<div class="overlay"></div>

<!-- Overlay -->
<div class="overlay" id="menuOverlay"></div>


  

  <!-- Scripts -->
  <script src="scripts/pay.js"></script>

<script>
(function(){
  const canvas = document.getElementById("matrixCanvas");
  const ctx = canvas.getContext("2d");

  let width = canvas.width = window.innerWidth;
  let height = canvas.height = window.innerHeight;

  // Dynamically set font size based on screen width
  let fontSize = width > 768 ? 24 : 16; // larger on desktop
  ctx.font = `${fontSize}px 'Exo 2', sans-serif`;

  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%^&*()';
  const chars = characters.split('');

  let columns = Math.floor(width / fontSize);
  let drops = Array(columns).fill(0);

  const colors = ['#cadcfc', '#8ab6f9', '#00246b'];

  function draw() {
    // Background with fading trail
    ctx.fillStyle = 'rgba(0, 0, 20, 0.05)';
    ctx.fillRect(0, 0, width, height);

    for (let i = 0; i < drops.length; i++) {
      const text = chars[Math.floor(Math.random() * chars.length)];
      ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)];
      ctx.fillText(text, i * fontSize, drops[i] * fontSize);

      drops[i]++;
      if (drops[i] * fontSize > height && Math.random() > 0.975) {
        drops[i] = 0;
      }
    }

    requestAnimationFrame(draw);
  }

  draw();

  // Responsive
  window.addEventListener('resize', () => {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;

    fontSize = width > 768 ? 24 : 16; // adjust font size on resize
    ctx.font = `${fontSize}px 'Exo 2', sans-serif`;

    columns = Math.floor(width / fontSize);
    drops = Array(columns).fill(0);
  });
})();
</script>


<script type="module">
  import { app } from "./firebase.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

  const auth = getAuth(app);
  const db = getFirestore(app);

  // ðŸŽ¯ Target only the premium planâ€™s price
  const premiumPriceElement = document.querySelector(".card.premium .price");

  // ðŸŒ Nationality-based pricing
  const pricing = {
    Kenyan: { value: 1499, currency: "KES" },
    Ugandan: { value: 55000, currency: "UGX" },
    Tanzanian: { value: 26000, currency: "TZS" },
    Nigerian: { value: 15000, currency: "NGN" },
    "South African": { value: 360, currency: "ZAR" },
    Other: { value: 19, currency: "$" },
    default: { value: 19, currency: "$" }
  };

  // ðŸ”¥ When user is authenticated
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      try {
        const userRef = doc(db, "signup", user.uid); // âœ… use signup collection
        const userSnap = await getDoc(userRef);

        if (userSnap.exists()) {
          const userData = userSnap.data();
          const nationality = userData.nationality || "default";
          console.log("User nationality:", nationality);

          const userPricing = pricing[nationality] || pricing.default;

          // âœ¨ Smoothly animate the price update
          premiumPriceElement.style.transition = "opacity 0.5s ease";
          premiumPriceElement.style.opacity = 0;

          setTimeout(() => {
            premiumPriceElement.innerHTML = `${userPricing.currency}${userPricing.value}<span>/month</span>`;
            premiumPriceElement.style.opacity = 1;
          }, 400);
        } else {
          console.warn("User document not found in 'signup' collection.");
        }
      } catch (error) {
        console.error("Error fetching user nationality:", error);
      }
    } else {
      console.warn("No user is signed in. Price will remain default.");
    }
  });
</script>



</body>
</html>
